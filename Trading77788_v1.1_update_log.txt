Trading77788 v1.1 Update Log
Date: 2025-07-12

1. ✅ Added utils/timeNY.js — unified New York timezone helper using Luxon.
2. ✅ Implemented Spec‑accurate M1‑M3 algorithms:
   • js/modules/metrics/positionUtils.js
   • js/modules/metrics/M1.js (持仓成本)
   • js/modules/metrics/M2.js (持仓市值)
   • js/modules/metrics/M3.js (持仓浮盈)
   • js/modules/metrics-engine.js consolidates calculations.
3. ✅ New metrics-render.js auto-renders M1‑M3 into #stat-1 / #stat-2 / #stat-3 every 30s with graceful error handling.
4. ✅ index.html now loads metrics-render.js via ES module tag. No existing scripts touched.
5. ✅ selfcheck.html unchanged — will turn red if metrics-render fails to attach.
6. ➕ Placeholders for future M4‑M13 remain to avoid breaking page.
7. 🛡 Added defensive try/catch around localStorage and price fetching to prevent white‑screen on bad data.
