<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>Stock Detail</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/style.css" />
  <script src="js/config.js"></script>
  <script>document.addEventListener("DOMContentLoaded",()=>{document.title=document.title.replace(/v?\d+(\.\d+)?/, "").trim()+" "+(window.APP_CONFIG?window.APP_CONFIG.VERSION:"");});</script>
</head>
<body>
  <header class="top">
    
    <a href="index.html" class="details" style="margin-left:20px;">← 返回</a>
  </header>
  <h2 class="section-title" id="title"></h2>
  <table id="detail-table" class="table"></table>

  <script>
    const params = new URLSearchParams(window.location.search);
    const symbol = params.get('symbol') || '';
    document.getElementById('title').textContent = symbol ? symbol + ' 交易详情' : '未知股票';
    const sample = JSON.parse(localStorage.getItem('trades')||'[]').filter(t=>t.symbol===symbol);
    const tbl=document.getElementById('detail-table');
    if(sample.length){
      const head=['日期','方向','单价','数量','盈亏'];
      tbl.innerHTML='<tr>'+head.map(h=>`<th>${h}</th>`).join('')+'</tr>';
      sample.forEach(t=>{
        const plCls=t.pl>0?'green':t.pl<0?'red':'white';
        tbl.insertAdjacentHTML('beforeend',`
          <tr><td>${t.date}</td><td>${t.side}</td><td>${t.price.toFixed(2)}</td><td>${t.qty}</td>
          <td class="${plCls}">${t.pl.toFixed(2)}</td></tr>`);
      });
    }else{
      tbl.innerHTML='<tr><td>暂无数据</td></tr>';
    }
  </script>
</body>
</html>
