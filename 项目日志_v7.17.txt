
Trading777 项目日志
版本: v7.17
日期: 2025-07-07 02:46

【核心改动】
1. 新增 js/closeRecorder.js – 自动在美东交易日收盘后（16:00 ET）记录首页“个股情况”所涉及全部标的的收盘价。
   • 基于 window.fetchRealtimePrice 接口，每支股票请求间隔 1.2s，满足 Finnhub 免费额度每分钟 ≤50 请求。
   • 成功获取后调用 priceService.saveDailyClose() 持久化到 data/price-history.json。
   • 若收盘时网页未开启，脚本会在下次启动时自动补录缺失的收盘价。

2. 扩展 js/services/priceService.js
   • 新增 saveDailyClose(symbol, price) 方法，用于写入当天收盘价。

3. index.html
   • 注入 <script type="module" src="js/closeRecorder.js">，并将标题版本号更新为 v7.17。

【保持不变】
— UI 布局、样式及现有交互逻辑完全保持上一版本一致。
— 本地持久化结构（price-history.json、localStorage trades/positions）格式不变。
— Alpha Vantage 日线同步逻辑暂时保留，如需后续移除再行通知。

⚠️ 注意
— 由于项目为“纯前端 + JSON”模式，closeRecorder 依赖浏览器或打包后应用在收盘时处于运行状态；否则将在下次打开时自动补录。
— 若未来跟踪标的 ≥2500 支，请调高 DELAY_PER_CALL_MS 以避免触发 Finnhub 速率限制。
