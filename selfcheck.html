<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Trading777 Self‑Check</title>
<style>
body{{font-family:Arial;background:#111;color:#eee;padding:20px}}
table{{border-collapse:collapse;width:100%}}
td,th{{border:1px solid #555;padding:8px;text-align:left}}
.green{{color:#0f0}} .red{{color:#f33}}
</style>
</head>
<body>
<h1>Trading777 自检面板</h1>
<table>
<thead><tr><th>检查项</th><th>结果</th><th>详情</th></tr></thead>
<tbody id="results"></tbody>
</table>

<script type="module">
import {{ NY_TZ }} from './js/utils/timeNY.js';
const checks = {{}};

try{ 
  const trades=JSON.parse(localStorage.getItem('trades')||'[]');
  checks.localStorage = {{ ok:true, detail:`trades: ${trades.length}` }};
}catch(e){{ checks.localStorage={{ok:false,detail:e.message}} }}

try{ 
  await import('./js/dashboard.js');
  checks.dashboard={{ok:true,detail:'dashboard.js loaded'}};
}catch(e){{ checks.dashboard={{ok:false,detail:e.message}} }}

for(const [k,v] of Object.entries(checks)){{
  const tr=document.createElement('tr');
  tr.innerHTML = `<td>${{k}}</td><td class="${{v.ok?'green':'red'}}">${{v.ok?'✔':'✖'}}</td><td>${{v.detail}}</td>`;
  document.getElementById('results').appendChild(tr);
}}
</script>
</body>
</html>
